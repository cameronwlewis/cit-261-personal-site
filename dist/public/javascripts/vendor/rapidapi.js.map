{"version":3,"sources":["../../../../public/javascripts/vendor/rapidapi.js"],"names":["exports","RapidAPI","e","t","project","key","getBaseURL","blockURLBuilder","callbackBaseURL","call","o","n","s","r","XMLHttpRequest","a","open","setRequestHeader","btoa","Object","keys","reduce","File","FormData","forEach","append","JSON","stringify","onload","parse","response","status","hasOwnProperty","outcome","payload","error","send","i","on","listen","_typeof","token","WebSocket","onopen","topic","event","ref","onerror","onclose","onmessage","data","body","msg","text","setInterval","c"],"mappings":"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","file":"rapidapi.js","sourcesContent":["\nexports.RapidAPI = RapidAPI;\n\nfunction RapidAPI(e, t) {\n    this.project = e, this.key = t, this.getBaseURL = function () {\n        return \"https://rapidapi.io/connect\";\n    }, this.blockURLBuilder = function (e, t) {\n        return this.getBaseURL() + \"/\" + e + \"/\" + t;\n    }, this.callbackBaseURL = function () {\n        return \"https://webhooks.rapidapi.com\";\n    }, this.call = function (e, t, o) {\n        var n,\n            s = {},\n            r = new XMLHttpRequest(),\n            a = this.blockURLBuilder(e, t);\n        r.open(\"POST\", a, !0), r.setRequestHeader(\"Authorization\", \"Basic \" + btoa(this.project + \":\" + this.key)), r.setRequestHeader(\"User-Agent\", \"JavascriptSDK\"), Object.keys(o).reduce(function (e, t) {\n            return e || o[t] instanceof File;\n        }, !1) ? (n = new FormData(), Object.keys(o).forEach(function (e) {\n            n.append(e, o[e]);\n        })) : (n = JSON.stringify(o) || {}, r.setRequestHeader(\"Content-Type\", \"application/json\"), r.setRequestHeader(\"Accept\", \"application/json\")), r.onload = function () {\n            var e;\n            try {\n                e = JSON.parse(this.response);\n            } catch (t) {\n                e = this.response;\n            }\n            200 === this.status && e.hasOwnProperty(\"outcome\") ? s.hasOwnProperty(e.outcome) && s[e.outcome](e.payload) : s.hasOwnProperty(\"error\") && s.error(e);\n        }, r.send(n);\n        var i = {\n            on: function on(e, t) {\n                if (\"function\" != typeof t || \"string\" != typeof e) throw \"Invalid event key and callback. Event key should be a string and callback should be a function.\";\n                return s[e] = t, i;\n            }\n        };\n        return i;\n    }, this.listen = function (e, t, o) {\n        var n = {},\n            s = function s(e) {\n                return n[e] || function () {\n                };\n            },\n            r = e + \".\" + t + \"_\" + this.project + \":\" + this.key,\n            a = new XMLHttpRequest(),\n            i = this.callbackBaseURL() + \"/api/get_token?user_id=\" + r;\n        a.open(\"GET\", i, !0), a.setRequestHeader(\"Content-Type\", \"application/json\"), a.setRequestHeader(\"Authentication\", \"Basic \" + btoa(this.project + \":\" + this.key)), a.onload = function () {\n            var e;\n            if (200 === this.status) try {\n                \"object\" != _typeof(this.response) && (e = JSON.parse(this.response));\n            } catch (e) {\n                return;\n            }\n            var t = e.token,\n                n = \"wss://webhooks.rapidapi.com/socket/websocket?token=\" + t,\n                r = new WebSocket(n);\n            r.onopen = function (e) {\n                var n = {topic: \"users_socket:\" + t, event: \"phx_join\", ref: \"1\", payload: o};\n                r.send(JSON.stringify(n));\n            }, r.onerror = s(\"error\"), r.onclose = s(\"close\"), r.onmessage = function (e) {\n                try {\n                    var t = JSON.parse(e.data);\n                    if (\"phx_reply\" === t.event && \"ok\" === t.payload.status) return void s(\"join\")();\n                    t.payload.body && t.payload.body.msg && \"error\" === t.payload.body.msg.status ? s(\"error\")(t.payload.body.msg) : s(\"message\")(t.payload.body.text);\n                } catch (e) {\n                    s(\"error\")();\n                }\n            }, setInterval(function () {\n                var e = {topic: \"phoenix\", event: \"heartbeat\", ref: \"1\", payload: {}};\n                r.send(JSON.stringify(e));\n            }, 3e4);\n        }, a.send();\n        var c = {\n            on: function on(e, t) {\n                if (\"function\" != typeof t) throw \"Callback must be a function.\";\n                if (\"string\" != typeof e) throw \"Event must be a string.\";\n                return n[e] = t, c;\n            }\n        };\n        return c;\n    };\n}\n\n//# sourceMappingURL=rapidapi.js.map"]}