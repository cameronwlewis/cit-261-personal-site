{"version":3,"sources":["../../../public/javascripts/test.js"],"names":["accessToken","data_test","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","getSpotifyPlaylist","spotify","SpotifyWebApi","setAccessToken","searchPlaylists","limit","err","data","console","error","log","playlist","playlists","items","name","imageLoader","document","getElementById","addEventListener","handleImage","canvas","ctx","getContext","selectedImage","submitImage","sendImage","e","reader","FileReader","onload","event","img","Image","width","height","drawImage","src","target","result","files","readAsDataURL","style","visibility","rapid","RapidAPI","strongestEmotion","call","on","payload","scores","emotionScore","key"],"mappings":"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","file":"test.js","sourcesContent":["\nvar accessToken ='';\n\nfunction data_test() {\n    let xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n        if (this.readyState === 4 && this.status === 200) {\n            accessToken = this.responseText;\n        }\n    };\n    xhttp.open(\"GET\", \"http://localhost:3000/data_test\", true);\n    xhttp.send();\n}\n\n// put code here that searches playlists, and see if it works!\n\n\nfunction getSpotifyPlaylist() {\n    var spotify = new SpotifyWebApi();\n    spotify.setAccessToken(accessToken);\n\n    spotify.searchPlaylists('pop', {limit: 1}, function (err, data) {\n\n        if (err) console.error(err);\n        else {\n            console.log('Pop Playlist: ', data);\n            var playlist = data.playlists.items[0].name;\n            console.log(playlist);\n        }\n    });\n}\n\nvar imageLoader = document.getElementById('imageLoader');\nimageLoader.addEventListener('change', handleImage, false);\nvar canvas = document.getElementById('imageCanvas');\nvar ctx = canvas.getContext('2d');\n\nvar selectedImage;\nvar submitImage = document.getElementById('submitImage');\nsubmitImage.addEventListener('click', sendImage);\n\nfunction handleImage(e){\n    var reader = new FileReader();\n    reader.onload = function(event){\n        var img = new Image();\n        img.onload = function(){\n            canvas.width = img.width;\n            canvas.height = img.height;\n            ctx.drawImage(img,0,0);\n        };\n        img.src = event.target.result;\n        selectedImage = e.target.files[0];\n    };\n    reader.readAsDataURL(e.target.files[0]);\n    document.getElementById('submitImage').style.visibility='visible';\n}\n\nfunction sendImage(){\n    let rapid =  new RapidAPI(\"cit261-app_59643290e4b02799980f80b8\", \"cc8619fe-d5c5-47e6-9393-7f698b2c22c4\");\n    let strongestEmotion = \"\";\n\n    rapid.call('MicrosoftEmotionAPI', 'getEmotionRecognition', {\n        'subscriptionKey': '449155b07e884d8ea5bae531f5cf47ec',\n        'image': selectedImage\n\n    }).on('success', function (payload) {\n\n        let scores = payload[0].scores;\n\n        let emotionScore = 0;\n        for (let key in scores) {\n            if (scores[key] > emotionScore) {\n                emotionScore = scores[key];\n                console.log(emotionScore);\n                strongestEmotion = key;\n                console.log(strongestEmotion);\n            }\n        }\n        // our strongest emotion from the photo has been found!\n        console.log(\"final: \" + strongestEmotion);\n\n\n    }).on('error', function (payload) {\n\n        console.log('Error!');\n    });\n}\n\n"]}